language: java

jdk:
  - oraclejdk8
  - openjdk7

before_deploy: >
  ant -f build/ant.xml
  
deploy:
  provider: releases
  prerelease: true
  api_key:
    secure: "dALKUpIxCRXds49YQZMVQw2EwmXy8QG3pN1SNETUxJ/0SHRHIf/9GZoALps3AxLHhfAMSuT6UsXg3bUPcadw+hGfHhNLzamzgkKf1A0VdQB3Fimn3zGKyfbTbiLPgzjio81/XbXgNXjfpXT8w7Pdw0J4jPCToxFmJ1qA78Dls2w="
  file:
    - build/target/cloudslang-cli/cslang-cli.zip
    - build/target/cloudslang-cli/cslang-cli.tar.gz
    - build/target/cslang-builder/cslang-builder.zip
  skip_cleanup: true
  on:
    repo: CloudSlang/cloud-slang
    tags: true
    jdk: openjdk7

after_success:
  - mvn cobertura:cobertura coveralls:report
